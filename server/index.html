<!doctype html>
<html>
<!--<head>-->
    <!--<title>Socket.IO chat</title>-->
    <!--<style>-->
        <!--canvas {-->
            <!--height: 800px;-->
            <!--width: 800px;-->
        <!--}-->
    <!--</style>-->
<!--</head>-->
<body>
<canvas id="canvas" height="800" width="800"></canvas>
</body>
<script src="/socket.io/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
<script>
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');

    ctx.fillStyle = 'green';

    ctx.fillRect(0, 0, 1000, 1000);

    $(function () {
        const socket = io();
        socket.on('pong', function(msg){
            ctx.fillStyle = 'green';
            ctx.fillRect(0, 0, 1000, 1000);
            msg.bounds.forEach((element) => {
                ctx.beginPath();
                ctx.moveTo(element.start[0], element.start[1]);
                ctx.lineTo(element.end[0], element.end[1]);
                ctx.stroke();
                ctx.closePath();
            });
            ctx.fillStyle = 'black';
            msg.balls.forEach(ball => {
                ctx.beginPath();
                ctx.arc(ball.x,ball.y,ball.radius,0,6.28);
                ctx.fill();
                ctx.closePath();
            });

            var i = 0;
            for (var key in msg.players){
                const startCoordinates = msg.bounds[i*2].start;
                const endCoordinates = msg.bounds[i*2].end;
                ctx.fillText(msg.players[key], (startCoordinates[0]+endCoordinates[0])/2, (startCoordinates[1]+endCoordinates[1])/2);
                i++;
            }
        });
    });
</script>
</html>